1. Clear Specify Role and Responsibility 
  You are a database engineer. Create a syntactically correct Snowflake query for the given input.

2. Specify Tables and Columns Definition
  This is the most important part of the prompt as columns definition will help foundational model understand the user question and relate to correct columns. Be as descriptive as possible.

      Table definition:
      - Table Name: ECOMMERCE_SCHM.PRODUCTS
      - Columns
          product_name - the name of the product
          product_category – Main category of the product
          product_category_tree - Main category and subcategory under which the product belongs like Jewellery >> Necklaces & Chains >> Necklace, Jewellery >> Rings
          pid – primary key to identify product
          retail_price – Retail price of the product
          discounted_price – Discounted price of the product
          image – url of product image
          is_advantage_product – CHAR(1) - A flag to indicate if product is an yes. Y means Yes and N means No. 
          product_rating – Integer - product rating from 0 to 5
          overall_rating - Integer – overall product rank in its category
          brand – brand of the product
          product_specifications – Specification of product like size, weight, colors etc
          availability_country_code - 2 character customer country code. Use ISO alpha-2 code for customer country codes in the filter for country code. Use GB for United Kingdom.

3. Mention possible domain values for the columns
    
    product_category - Home, Jewellery, Books, Shoes, Clothes, Furniture
    is_advantage_product - Y, N

4. Mention the rules to be followed
    Rules:
    Ensure that the SQL query is concise and do not repeat the column names.
    To limit result set use 'LIMIT'. Never use the term "TOP" to limit result set.
    Do not add quotes for the column alias.
    Use SELECT DISTINCT to avoid duplicates.
    Use 2 character ISO country codes in the filter for country code. 
    If not asked in the question, do not limit the data.
    If there is a month or quarter filter, do include year and month filters.
    Use like operator to match customer names in the filter.
    Use upper function for columns in where clause to match the filter values. 
    Do not miss possible product names from the question. 
    Strictly use only domain values in filters for these columns: product_category 

5. Output format - A standardized format for the generated output should be implemented to facilitate seamless integration and execution within downstream applications, ensuring compatibility and efficiency.

    Format the generated SQL output as follows.
    Question:
    SQL: 
    Done:"Stop here"

6. Providing Illustrative Examples
    This important section of the prompt allows you to determine the information to be included. The Enterprise users expect their application to be built as per requirements and system should give right information, without them specifying every time.
    A text-to-sql prompt works well with 3-5(max) examples. Try to find the patterns in questions like user is asking for details level or aggregate levels. Create examples based on these patterns and keep it consistent.
    Secondly try to use maximum columns across examples. Diverse query patterns and leveraging multiple columns increases user question understanding and better SQL accuracy.
    Thirdly, do not forget to use the output format in the examples also.

    Example 1
    Question: Show me all available rings in India.
    SQL: Select pid product_name, product_category, product_category_tree, retail_price, discounted_price from ECOMMERCE_SCHM.PRODUCTS where UPPER(product_category) like ‘%RINGS%’ and availability_country_code = ‘IN’
    Done:"Stop here"
    
    Note that country code is mentioned in to 2 letter ISO format
    
    Example 2
    Question: Show me top 10 furniture items with highest discounts 
    SQL: Select product_name, (retail_price  - discounted_price)*100/ retail_price as discount_percent from ECOMMERCE_SCHM.PRODUCTS where UPPER(product_category) like ‘%FURNITURE%’ order by discount_percent desc LIMIT 10
    Done:"Stop here"
    
    Example 3
    Question: Summarize the total advantageous products by category with a 4-star rating and above.
    SQL: Select product_category, count (1) as Total_products, avg(overall_rating) as avg_rating from ECOMMERCE_SCHM.PRODUCTS where is_Advantage_product = ‘Y’ 
    group by product_category
    having avg_rating >= 4
    Done:"Stop here" 
